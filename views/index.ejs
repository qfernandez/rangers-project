<!DOCTYPE html>
<html>
    <head>
        <title>Texas Rangers Project</title>
        <script type="text/javascript" src="functions/functions.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link rel="stylesheet" href="css/styles.css" type="text/css"/>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    </head>
    <body>
        <div class="sidenav">
         <div class="login-main-text">
            <h2>Application<br> Login Page</h2>
            <p>Login or register from here to access.</p>
        </div>
          </div>
          <div class="main">
             <div class="col-md-6 col-sm-12">
                <div class="login-form">
                   <form>
                      <div class="form-group">
                         <label>User Name</label>
                         <input type="text" class="form-control" placeholder="User Name">
                      </div>
                      <div class="form-group">
                         <label>Password</label>
                         <input type="password" class="form-control" placeholder="Password">
                      </div>
                      <button type="submit" class="btn btn-black">Login</button>
                      <button type="submit" class="btn btn-secondary">Register</button>
                   </form>
                </div>
             </div>
          </div>
        </div>
        <script>
                $(document).ready(function() {
                
                
                    $("#loginBtn").on("click", function(){
                        
                        //alert("works!");
                        
                        $.ajax({
                        
                              method: "POST",
                                 url: "/loginProcess",
                            dataType: "JSON",
                                data: { "username":$("#username").val(),
                                        "password":$("#password").val() },
                             success: function(result,status) {
                                //alert(result);
                                if (!result.loginSuccess) {
                                    alert("Wrong credentials!");
                                    
                                } else {
                                    if (result.admin) {
                                        location.href = "/admin"; //redirects to admin route
                                    }
                                    else {
                                        location.href = "/profile"; // redirects to search route
                                    }
                                    
                                }
                            }
                            
                        });//ajax
                        
                    });//click
                
                }); //document.ready
        
        </script>
    </body>
</html>